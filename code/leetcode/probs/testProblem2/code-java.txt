public class MaxiumSubarray {

    //152 Maximum Product Subarray
    public int maxProduct(int[] nums) {

        if (nums == null || nums.length == 0){
            return 0;
        }

        //can use O(1) instead of array since only previous matters
        int max = nums[0];
        int prevMax = max; //max product subarray ending at this index
        int prevMin = max;

        for (int i=1; i < nums.length; i++){
            int cur = nums[i];

            //Insight: Negative number makes smaller number bigger, bigger number smaller!
            if (nums[i] < 0) {
                int t = prevMin;
                prevMin = prevMax;
                prevMax = t;
            }

            prevMax = Math.max(prevMax*cur, cur);
            prevMin = Math.min(prevMin*cur, cur);

            max = Math.max(max, prevMax);
        }
        return max;
    }
}