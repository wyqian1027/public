Instead of building the tree, one can directly work on the input.